# 概述

**操作系统**是指控制和管理整个计算机系统的**硬件和软件资源**，并合理地组织调度计算机的工作和资源的分配；以提供给用户和其他软件方便的**接口和环境**；它是计算机系统中最基本的**系统软件**。

## 操作系统的特征

操作系统一共有并发、共享、虚拟、异步四个特征，前两者为最基本的特征，二者互为存在条件。

- **并发**：并发指两个或多个事件在同一**时间间隔**内发生。实际上两个事件是交替发生的。与之相对的，**并行**指两个或多个事件在同一**时刻**同时发生。操作系统的并发性指计算机系统中“同时”运行着多个程序，单核 CPU 同一时刻只能执行一个程序，多核 CPU 同一时刻可以执行 CPU 数个程序。前者只能并发，后者可以并行。
- **共享**：共享即资源共享，是指系统中的资源可供内存中多个并发执行的进程共同使用。有两种资源共享方式即**互斥**共享方式和**同时**共享方式。
- **虚拟**：虚拟是指把一个物理上的实体变为若干个逻辑上的对应物理。物理实体是实际存在的，而逻辑上对应是用户感受到的。
- **异步**：在**多道程序**环境下，允许多个程序并发执行，但由于资源有限，进程的执行不是一贯到底的，而是走走停停，以不可预知的速度向前推进，这就是异步性。

## 操作系统的发展

- **手工操作阶段**：用户独占全机，人机速度矛盾导致资源利用率极低；
- **单道批处理系统**：缓解了一定程度的人机速率矛盾，资源利用率有所提升，但是内存中仅有一道程序运行，只有该程序运行结束之后才能调入下一道程序。CPU 有大量的时间空闲等待 I/O 完成，资源利用率仍然很低；
- **多道批处理系统**：多道程序**并发**执行，共享计算机资源。组员利用率大幅提升，CPU 和其他资源能保持“忙碌”状态，系统吞吐量大，但是不能人机交互；
- **分时操作系统**：计算机以**时间片**为单位**轮流**为各个用户或者作业服务，各个用户可通过**终端**与计算机进行交互，但是不能优先处理紧急任务；
- **实时操作系统**：能够响应一些紧急任务，某些紧急任务不需要时间片排队，分为硬实时操作系统和软实时操作系统。

## 操作系统的运行机制

操作系统上有两种程序，一种是**内核程序**，一种是**用户程序**。为了使得 CPU 能够处理内核程序和用户程序，设计了两种 CPU 状态分别为 **内核态** 和 **用户态**。CPU 通过 PSW 寄存器的标志位来区分用户态和用户态。发生**中断**会引发操作系统状态的变化。

## 中断和异常

**中断**会让 CPU 从用户态切换到内核态，是让操作系统内核夺回 CPU 使用权限的唯一途径。中断一共有两种类型，分为内中断和外中断：

- **内中断（异常）**：与当前执行的指令有关，中断信号来自于 CPU 内部；陷入、故障、终止。
- **外中断**：与当前执行的指令无关，中断信号来自于 CPU 外部。时钟中断、I/O 中断请求。

中断原理参考计算系统概论的陷入向量表。

## 系统调用


